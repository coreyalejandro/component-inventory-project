<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="800" viewBox="0 0 1200 800">
<defs>
  <marker id="arrow" markerWidth="10" markerHeight="10" refX="6" refY="3" orient="auto">
    <path d="M0,0 L0,6 L9,3 z" fill="#111111" />
  </marker>
</defs>
<text x="600.0" y="40" font-family="Inter,system-ui,Segoe UI,Arial" font-size="24" font-weight="600" text-anchor="middle" fill="#111111">GitInventory — End-to-End Architecture (Frontend + Backend)</text><rect x="60" y="100" width="260" height="120" rx="18" fill="#f6f6f6" stroke="#111111" stroke-width="2"/><text x="190" y="140" font-family="Inter,system-ui,Segoe UI,Arial" font-size="18" font-weight="600" text-anchor="middle" fill="#111111">User Browser</text><text x="190" y="170" font-family="Inter,system-ui,Segoe UI,Arial" font-size="14" font-weight="normal" text-anchor="middle" fill="#111111">Next.js Dashboard (port 3001)</text><rect x="380" y="100" width="320" height="160" rx="18" fill="#ffffff" stroke="#111111" stroke-width="2"/><text x="540" y="135" font-family="Inter,system-ui,Segoe UI,Arial" font-size="18" font-weight="600" text-anchor="middle" fill="#111111">Frontend (Next.js App Router)</text><text x="540" y="160" font-family="Inter,system-ui,Segoe UI,Arial" font-size="14" font-weight="normal" text-anchor="middle" fill="#111111">Server routes: /api/scan, /api/inventory</text><text x="540" y="185" font-family="Inter,system-ui,Segoe UI,Arial" font-size="14" font-weight="normal" text-anchor="middle" fill="#111111">Env: NEXT_PUBLIC_BACKEND_URL</text><rect x="760" y="100" width="360" height="220" rx="18" fill="#ffffff" stroke="#111111" stroke-width="2"/><text x="940" y="135" font-family="Inter,system-ui,Segoe UI,Arial" font-size="18" font-weight="600" text-anchor="middle" fill="#111111">Backend (Fastify API + Workers)</text><text x="940" y="160" font-family="Inter,system-ui,Segoe UI,Arial" font-size="14" font-weight="normal" text-anchor="middle" fill="#111111">Endpoints: /v1/repos/scan, /v1/.../inventory</text><text x="940" y="185" font-family="Inter,system-ui,Segoe UI,Arial" font-size="14" font-weight="normal" text-anchor="middle" fill="#111111">OAuth: /oauth/github/login → JWT</text><text x="940" y="210" font-family="Inter,system-ui,Segoe UI,Arial" font-size="14" font-weight="normal" text-anchor="middle" fill="#111111">Queue: BullMQ (Redis)</text><text x="940" y="235" font-family="Inter,system-ui,Segoe UI,Arial" font-size="14" font-weight="normal" text-anchor="middle" fill="#111111">Storage: PostgreSQL</text><text x="940" y="260" font-family="Inter,system-ui,Segoe UI,Arial" font-size="14" font-weight="normal" text-anchor="middle" fill="#111111">OpenAPI: /docs</text><rect x="820" y="360" width="120" height="90" rx="14" fill="#f6f6f6" stroke="#111111" stroke-width="2"/><text x="880" y="392" font-family="Inter,system-ui,Segoe UI,Arial" font-size="16" font-weight="600" text-anchor="middle" fill="#111111">Redis</text><text x="880" y="414" font-family="Inter,system-ui,Segoe UI,Arial" font-size="14" font-weight="normal" text-anchor="middle" fill="#111111">Queue</text><rect x="980" y="360" width="120" height="90" rx="14" fill="#f6f6f6" stroke="#111111" stroke-width="2"/><text x="1040" y="392" font-family="Inter,system-ui,Segoe UI,Arial" font-size="16" font-weight="600" text-anchor="middle" fill="#111111">Postgres</text><text x="1040" y="414" font-family="Inter,system-ui,Segoe UI,Arial" font-size="14" font-weight="normal" text-anchor="middle" fill="#111111">Inventory</text><rect x="900" y="500" width="180" height="110" rx="18" fill="#f6f6f6" stroke="#111111" stroke-width="2"/><text x="990" y="535" font-family="Inter,system-ui,Segoe UI,Arial" font-size="18" font-weight="600" text-anchor="middle" fill="#111111">GitHub APIs</text><text x="990" y="560" font-family="Inter,system-ui,Segoe UI,Arial" font-size="14" font-weight="normal" text-anchor="middle" fill="#111111">REST v3 + GraphQL v4</text><rect x="690" y="500" width="170" height="90" rx="18" fill="#f6f6f6" stroke="#111111" stroke-width="2"/><text x="775" y="532" font-family="Inter,system-ui,Segoe UI,Arial" font-size="18" font-weight="600" text-anchor="middle" fill="#111111">OSV</text><text x="775" y="555" font-family="Inter,system-ui,Segoe UI,Arial" font-size="14" font-weight="normal" text-anchor="middle" fill="#111111">Vulnerability Lookup</text><line x1="320" y1="160" x2="380" y2="160" stroke="#111111" stroke-width="2" marker-end="url(#arrow)"/><line x1="700" y1="160" x2="760" y2="160" stroke="#111111" stroke-width="2" marker-end="url(#arrow)"/><line x1="940" y1="320" x2="880" y2="360" stroke="#111111" stroke-width="2" marker-end="url(#arrow)"/><line x1="940" y1="320" x2="1040" y2="360" stroke="#111111" stroke-width="2" marker-end="url(#arrow)"/><line x1="940" y1="320" x2="990" y2="500" stroke="#111111" stroke-width="2" marker-end="url(#arrow)"/><line x1="940" y1="320" x2="775" y2="500" stroke="#111111" stroke-width="2" marker-end="url(#arrow)"/><text x="170" y="620" font-family="Inter,system-ui,Segoe UI,Arial" font-size="20" font-weight="600" text-anchor="middle" fill="#111111">One-Screen Flow</text><text x="60" y="660" font-family="Inter,system-ui,Segoe UI,Arial" font-size="16" font-weight="normal" text-anchor="start" fill="#111111">1. Login: Open /oauth/github/login on Backend and copy the JWT.</text><text x="60" y="686" font-family="Inter,system-ui,Segoe UI,Arial" font-size="16" font-weight="normal" text-anchor="start" fill="#111111">2. Enqueue: Frontend POST /api/scan → proxies to Backend /v1/repos/scan with JWT.</text><text x="60" y="712" font-family="Inter,system-ui,Segoe UI,Arial" font-size="16" font-weight="normal" text-anchor="start" fill="#111111">3. Scan: Worker pulls from Redis; calls GitHub + OSV; writes to Postgres.</text><text x="60" y="738" font-family="Inter,system-ui,Segoe UI,Arial" font-size="16" font-weight="normal" text-anchor="start" fill="#111111">4. Fetch: Frontend /api/inventory → proxies to Backend /v1/.../inventory.</text><text x="60" y="764" font-family="Inter,system-ui,Segoe UI,Arial" font-size="16" font-weight="normal" text-anchor="start" fill="#111111">5. Render: Dashboard charts files, dependencies, vulnerabilities.</text><text x="880" y="720" font-family="Inter,system-ui,Segoe UI,Arial" font-size="14" font-weight="normal" text-anchor="middle" fill="#111111">Legend: Arrows = HTTP/API calls and internal I/O</text></svg>